beeConnect.HelpCenter.Views.HelpCenterContent=Backbone.View.extend({template:HandlebarsTemplates["help_center/content"],initialize:function(){this.eventAggregator.on("render:topic",this.render,this)},render:function(e){this.$el.html(this.template(e))}}),beeConnect.HelpCenter.Views.HelpCenterMenu=Backbone.View.extend({template:HandlebarsTemplates["help_center/navigation"],events:{"click .topics > li > a":"getTopic","click .top-questions ul > li > a":"getTopic","click .questions > li > span > a":"showTopics"},initialize:function(e){this.model=e.model,this.topQuestionsView=new beeConnect.HelpCenter.Views.topQuestions({model:this.model,el:this.$(".top-questions")}),this.eventAggregator.on("render:result",this.getResultTopic,this)},render:function(){return this.$(".all-questions nav").html(this.template(this.model.toJSON())),this.$(".top-questions").html(this.topQuestionsView.render()),this.$(".topics").slideUp(),this},getResultTopic:function(e){var t=this;this.model.fetchCurrent({data:e,success:function(e,n){t.eventAggregator.trigger("render:topic",n)},error:function(e,n){t.eventAggregator.trigger("render:topic",n.responseText)}})},getTopic:function(e){e.preventDefault();var t=$(e.target),n=t.data("topic"),i=this;this.setCurrent(t,".topics"),this.model.fetchCurrent({data:n,success:function(e,t){i.eventAggregator.trigger("render:topic",t)},error:function(e,t){i.eventAggregator.trigger("render:topic",t.responseText)}})},showTopics:function(e){e.preventDefault();var t=$(e.target),n=t.parents("li").find("ul"),i=(t.attr("href"),t.parents("li"));this.$(".topics").slideUp(),$(".questions").find(".icon").text("+"),this.setCurrent(t,".questions"),t.attr("href")!==n.data("target")&&this.$(".topics").slideUp(),n.slideDown(),i.find(".icon").text("-")},setCurrent:function(e,t){this.$(t).find("a").removeClass("current"),e.addClass("current")}}),beeConnect.HelpCenter.Views.HelpCenterSearch=Backbone.View.extend({template:HandlebarsTemplates["help_center/search"],events:{"keyup input#search":"searchTopic","click button[type='submit']":"searchTopic"},initialize:function(e){this.indice=e.indice,this.index=lunr(function(){this.field("title",{boost:10}),this.ref("id"),this.field("href")})},render:function(){this.$el.html(this.template()),this.createIndex()},createIndex:function(){var e=this;_.each(this.indice,function(t){e.index.add(t)})},searchTopic:function(){var e=this,t=this.$("input#search").val(),n=this.index.search(t).map(function(t){return e.indice.filter(function(e){return e.id===parseInt(t.ref,10)})[0]});this.eventAggregator.trigger("render:results",n)}}),beeConnect.HelpCenter.Views.HelpCenterSearchResults=Backbone.View.extend({template:HandlebarsTemplates["help_center/search_results"],events:{"click .results > li":"showTopic"},initialize:function(){this.eventAggregator.on("render:results",this.render,this)},render:function(e){this.$el.html(this.template(e))},showTopic:function(e){e.preventDefault();var t=$(e.toElement).parent("li").attr("id");this.eventAggregator.trigger("render:result",t)}}),beeConnect.HelpCenter.Views.topQuestions=Backbone.View.extend({template:HandlebarsTemplates["help_center/top-questions"],initialize:function(e){this.model=e.model},events:{"click li > a":"getTopic"},render:function(){this.$el.html(this.template(this.model.toJSON().menu[0].questions))}}),beeConnect.HelpCenter.Models.HelpCenter=Backbone.Model.extend({urlRoot:"/ajuda/",fetchCurrent:function(e){return e.url=this.urlRoot+e.data,Backbone.Model.prototype.fetch.call(this,e)}}),Handlebars.registerHelper("parameterize",function(e){for(var t,n=[{val:"a",let:"\xe1\xe0\xe3\xe2\xe4"},{val:"e",let:"\xe9\xe8\xea\xeb"},{val:"i",let:"\xed\xec\xee\xef"},{val:"o",let:"\xf3\xf2\xf5\xf4\xf6"},{val:"u",let:"\xfa\xf9\xfb\xfc"},{val:"c",let:"\xe7"},{val:"A",let:"\xc1\xc0\xc3\xc2\xc4"},{val:"E",let:"\xc9\xc8\xca\xcb"},{val:"I",let:"\xcd\xcc\xce\xcf"},{val:"O",let:"\xd3\xd2\xd5\xd4\xd6"},{val:"U",let:"\xda\xd9\xdb\xdc"},{val:"C",let:"\xc7"},{val:"",let:"?!()"}],i="-",r=e,s=0;s<n.length;s++)t=new RegExp("["+n[s].let+"]","g"),r=r.replace(t,n[s].val),t=null;return r.replace(/\s/g,i).toLowerCase()}),Handlebars.registerHelper("link",function(e,t){e=Handlebars.Utils.escapeExpression(e),t=Handlebars.Utils.escapeExpression(t);var n='<a href="'+Handlebars.helpers.parameterize(t)+'">'+e+'<span class="icon">+</span></a>';return new Handlebars.SafeString(n)});