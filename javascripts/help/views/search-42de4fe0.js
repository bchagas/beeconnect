beeConnect.HelpCenter.Views.HelpCenterSearch=Backbone.View.extend({template:HandlebarsTemplates["help_center/search"],events:{"keyup input#search":"searchTopic","click button[type='submit']":"searchTopic"},initialize:function(e){this.indice=e.indice,this.index=lunr(function(){this.field("title",{boost:10}),this.ref("id"),this.field("href")})},render:function(){this.$el.html(this.template()),this.createIndex()},createIndex:function(){var e=this;_.each(this.indice,function(t){e.index.add(t)})},searchTopic:function(){var e=this,t=this.$("input#search").val(),i=this.index.search(t).map(function(t){return e.indice.filter(function(e){return e.id===parseInt(t.ref,10)})[0]});this.eventAggregator.trigger("render:results",i)}});