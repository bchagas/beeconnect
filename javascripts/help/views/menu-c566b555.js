beeConnect.HelpCenter.Views.HelpCenterMenu=Backbone.View.extend({template:HandlebarsTemplates["help_center/navigation"],events:{"click .topics > li > a":"getTopic","click .top-questions ul > li > a":"getTopic","click .questions > li > span > a":"showTopics"},initialize:function(e){this.model=e.model,this.topQuestionsView=new beeConnect.HelpCenter.Views.topQuestions({model:this.model,el:this.$(".top-questions")}),this.eventAggregator.on("render:result",this.getResultTopic,this)},render:function(){return this.$(".all-questions nav").html(this.template(this.model.toJSON())),this.$(".top-questions").html(this.topQuestionsView.render()),this.$(".topics").slideUp(),this},getResultTopic:function(e){var t=this;this.model.fetchCurrent({data:e,success:function(e,i){t.eventAggregator.trigger("render:topic",i)},error:function(e,i){t.eventAggregator.trigger("render:topic",i.responseText)}})},getTopic:function(e){e.preventDefault();var t=$(e.target),i=t.data("topic"),s=this;this.setCurrent(t,".topics"),this.model.fetchCurrent({data:i,success:function(e,t){s.eventAggregator.trigger("render:topic",t)},error:function(e,t){s.eventAggregator.trigger("render:topic",t.responseText)}})},showTopics:function(e){e.preventDefault();var t=$(e.target),i=t.parents("li").find("ul"),s=(t.attr("href"),t.parents("li"));this.$(".topics").slideUp(),$(".questions").find(".icon").text("+"),this.setCurrent(t,".questions"),t.attr("href")!==i.data("target")&&this.$(".topics").slideUp(),i.slideDown(),s.find(".icon").text("-")},setCurrent:function(e,t){this.$(t).find("a").removeClass("current"),e.addClass("current")}});